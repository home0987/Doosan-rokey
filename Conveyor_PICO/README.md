# 📦 PICO 불량 데이터 검출 프로젝트

본 프로젝트는 Raspberry Pi Pico 칩셋의 불량품을 딥러닝과 컴퓨터 비전 기술로 자동 검출하는 시스템 개발을 목표로 합니다.  
컨베이어 벨트 위에 놓인 PICO를 고속으로 촬영, 분석하여 불량품과 정상품을 구분하며, 검사 시간 단축과 정확도 향상을 동시에 추구합니다.

---
## 🎥 프로젝트 데모 영상

[PICO 불량 데이터 검출 프로젝트](https://youtube.com/shorts/balqxE_6yuk?feature=share)

---


## 📌 프로젝트 개요

- **프로젝트 목표**  
  - 불량 감지율 90% 이상 달성  
  - 한 개 PICO당 검사 시간 3초 이내 
  - 불량 데이터 저장 및 실시간 통계 시각화  

- **문제점 및 해결책**  
  - 기존 수작업 검사 소요 시간과 정확도 문제 → 자동화  
  - 다양한 불량 유형(파손, Chipset, Oscillator 등) 검출  
  - 이미지 왜곡 보정을 위한 배경 제거 및 회전 보정  
  - 딥러닝 기반 YOLOv8 모델 사용 및 OpenCV 전처리
    
![PICO 불량 데이터 검출 프로젝트](./docs/PICO%20불량%20데이터%20검출%20프로젝트_page-0007.jpg)
![PICO 불량 데이터 검출 프로젝트](./docs/PICO%20불량%20데이터%20검출%20프로젝트_page-0009.jpg)

---

## 🛠 시스템 구성 및 기술

- **하드웨어**  
  - 컨베이어 벨트 및 피코를 나란히 배열하는 철 구조물 설치  
  - 빛 차단 지붕으로 이미지 선명도 향상

- **소프트웨어**  
  - DETA (Swin-L) 모델 채택 (YOLOv6 모델 대비 우수 성능)  
  - OpenCV 기반 이미지 전처리 및 히스토그램 평탄화  
  - U2-Net 모델로 배경 제거 및 이미지 크롭, 회전 보정  
  - 허프 변환을 통한 외곽선 검출 및 기울기 보정  
  - 시리얼 통신으로 촬영 신호 및 결과 전송  
  - MySQL 및 SQLite DB에 검사 결과 저장 및 관리자 페이지 시각화

![PICO 불량 데이터 검출 프로젝트](./docs/PICO%20불량%20데이터%20검출%20프로젝트_page-0011.jpg)
![PICO 불량 데이터 검출 프로젝트](./docs/PICO%20불량%20데이터%20검출%20프로젝트_page-0030.jpg)
![PICO 불량 데이터 검출 프로젝트](./docs/PICO%20불량%20데이터%20검출%20프로젝트_page-0026.jpg)

---

## 🛠 주요 기술 및 파일 구성

| 파일명                       | 설명                                              |
|-----------------------------|--------------------------------------------------|
| `conveyor-system-practice.py` | 카메라 영상 캡처 및 API 추론 요청 수행               |
| `final.py`                  | 이미지 전처리, 불량 판정, DB 저장 핵심 로직             |
| `final2.py`                 | Flask + SocketIO 기반 실시간 DB 모니터링 및 알림 서버     |
| `defect_analysis_charts.py` | Gradio 기반 불량 데이터 시각화 대시보드                  |
| `video_stream.py`           | 카메라 영상 녹화 및 저장 (개발/디버깅용)                  |

---

## 🚀 실행 방법

1. 환경 준비  
   - Python 3.10, OpenCV, Flask, Gradio, PyTorch, 기타 라이브러리 설치  
   - MySQL 및 SQLite DB 설치 및 설정  

2. 카메라 영상 캡처 및 API 호출  
   ```bash
   python3 conveyor-system-practice.py
   ```
   
3. 불량 판정 및 DB 저장
   ```bash
   python3 final.py
   ```

4. 실시간 웹 모니터링 서버 실행
   ```bash
   python3 final2.py
   ```
5. 불량 데이터 시각화 대시보드 실행
   ```bash
   python3 defect_analysis_charts.py
   ```
---

## 📈 주요 성능

- Precision: 0.9493  
- Recall: 0.9889  
- mAP@50: 0.9924  
- mAP@50-95: 0.9711  
- 검사 속도: 1개당 약 3초

---

## 🖥 데이터 시각화 및 관리

- 불량품 및 정상품 데이터 실시간 DB 저장  
- 관리자 페이지에서 불량 유형별 통계 및 개수 시각화  
- 공정률(정상품 비율) 모니터링을 통한 지속적 품질 개선 지원
![PICO 불량 데이터 검출 프로젝트](./docs/PICO%20불량%20데이터%20검출%20프로젝트_page-0034.jpg)

---

## ⚠ 리스크 및 대응

- 양품/불량품 판정 오류 대비, 수동 재검수 프로세스 마련  
- 데이터베이스 뷰어를 통한 빠른 오차 확인 및 수정 가능

---

## vision-ai-inference-practice
![20250131_18h07m33s_grim](https://github.com/user-attachments/assets/866348a7-7c9a-412f-9c1c-36017eff1593)
